{"version":3,"file":"TimeSeries.mjs","sources":["../../../../src/graveyard/TimeSeries/TimeSeries.tsx"],"sourcesContent":["import { Component } from 'react';\nimport * as React from 'react';\n\nimport { DataFrame, TimeRange } from '@grafana/data';\n\nimport { PanelContextRoot } from '../../components/PanelChrome/PanelContext';\nimport { hasVisibleLegendSeries, PlotLegend } from '../../components/uPlot/PlotLegend';\nimport { UPlotConfigBuilder } from '../../components/uPlot/config/UPlotConfigBuilder';\nimport { withTheme2 } from '../../themes/ThemeContext';\nimport { GraphNG, GraphNGProps, PropDiffFn } from '../GraphNG/GraphNG';\n\nimport { preparePlotConfigBuilder } from './utils';\n\nconst propsToDiff: Array<string | PropDiffFn> = ['legend', 'options', 'theme'];\n\ntype TimeSeriesProps = Omit<GraphNGProps, 'prepConfig' | 'propsToDiff' | 'renderLegend'>;\n\nexport class UnthemedTimeSeries extends Component<TimeSeriesProps> {\n  static contextType = PanelContextRoot;\n  declare context: React.ContextType<typeof PanelContextRoot>;\n\n  prepConfig = (alignedFrame: DataFrame, allFrames: DataFrame[], getTimeRange: () => TimeRange) => {\n    const { sync } = this.context;\n    const { theme, timeZone, renderers, tweakAxis, tweakScale } = this.props;\n\n    return preparePlotConfigBuilder({\n      frame: alignedFrame,\n      theme,\n      timeZones: Array.isArray(timeZone) ? timeZone : [timeZone],\n      getTimeRange,\n      sync,\n      allFrames,\n      renderers,\n      tweakScale,\n      tweakAxis,\n    });\n  };\n\n  renderLegend = (config: UPlotConfigBuilder) => {\n    const { legend, frames } = this.props;\n\n    if (!config || (legend && !legend.showLegend) || !hasVisibleLegendSeries(config, frames)) {\n      return null;\n    }\n\n    return <PlotLegend data={frames} config={config} {...legend} />;\n  };\n\n  render() {\n    return (\n      <GraphNG\n        {...this.props}\n        prepConfig={this.prepConfig}\n        propsToDiff={propsToDiff}\n        renderLegend={this.renderLegend}\n      />\n    );\n  }\n}\n\nexport const TimeSeries = withTheme2(UnthemedTimeSeries);\nTimeSeries.displayName = 'TimeSeries';\n"],"names":[],"mappings":";;;;;;;;AAaA,MAAM,WAA0C,GAAA,CAAC,QAAU,EAAA,SAAA,EAAW,OAAO,CAAA;AAItE,MAAM,2BAA2B,SAA2B,CAAA;AAAA,EAA5D,WAAA,GAAA;AAAA,IAAA,KAAA,CAAA,GAAA,SAAA,CAAA;AAIL,IAAa,IAAA,CAAA,UAAA,GAAA,CAAC,YAAyB,EAAA,SAAA,EAAwB,YAAkC,KAAA;AAC/F,MAAM,MAAA,EAAE,IAAK,EAAA,GAAI,IAAK,CAAA,OAAA;AACtB,MAAA,MAAM,EAAE,KAAO,EAAA,QAAA,EAAU,WAAW,SAAW,EAAA,UAAA,KAAe,IAAK,CAAA,KAAA;AAEnE,MAAA,OAAO,wBAAyB,CAAA;AAAA,QAC9B,KAAO,EAAA,YAAA;AAAA,QACP,KAAA;AAAA,QACA,WAAW,KAAM,CAAA,OAAA,CAAQ,QAAQ,CAAI,GAAA,QAAA,GAAW,CAAC,QAAQ,CAAA;AAAA,QACzD,YAAA;AAAA,QACA,IAAA;AAAA,QACA,SAAA;AAAA,QACA,SAAA;AAAA,QACA,UAAA;AAAA,QACA;AAAA,OACD,CAAA;AAAA,KACH;AAEA,IAAA,IAAA,CAAA,YAAA,GAAe,CAAC,MAA+B,KAAA;AAC7C,MAAA,MAAM,EAAE,MAAA,EAAQ,MAAO,EAAA,GAAI,IAAK,CAAA,KAAA;AAEhC,MAAI,IAAA,CAAC,MAAW,IAAA,MAAA,IAAU,CAAC,MAAA,CAAO,cAAe,CAAC,sBAAA,CAAuB,MAAQ,EAAA,MAAM,CAAG,EAAA;AACxF,QAAO,OAAA,IAAA;AAAA;AAGT,MAAA,2BAAQ,UAAW,EAAA,EAAA,IAAA,EAAM,MAAQ,EAAA,MAAA,EAAiB,GAAG,MAAQ,EAAA,CAAA;AAAA,KAC/D;AAAA;AAAA,EAEA,MAAS,GAAA;AACP,IACE,uBAAA,GAAA;AAAA,MAAC,OAAA;AAAA,MAAA;AAAA,QACE,GAAG,IAAK,CAAA,KAAA;AAAA,QACT,YAAY,IAAK,CAAA,UAAA;AAAA,QACjB,WAAA;AAAA,QACA,cAAc,IAAK,CAAA;AAAA;AAAA,KACrB;AAAA;AAGN;AAzCa,kBAAA,CACJ,WAAc,GAAA,gBAAA;AA0CV,MAAA,UAAA,GAAa,WAAW,kBAAkB;AACvD,UAAA,CAAW,WAAc,GAAA,YAAA;;;;"}