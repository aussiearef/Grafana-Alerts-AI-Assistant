{"version":3,"file":"Filter.mjs","sources":["../../../../src/components/Table/Filter.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport { useCallback, useMemo, useRef, useState } from 'react';\n\nimport { Field, GrafanaTheme2, SelectableValue } from '@grafana/data';\n\nimport { Popover } from '..';\nimport { useStyles2 } from '../../themes';\nimport { Icon } from '../Icon/Icon';\n\nimport { REGEX_OPERATOR } from './FilterList';\nimport { FilterPopup } from './FilterPopup';\nimport { TableStyles } from './styles';\n\ninterface Props {\n  column: any;\n  tableStyles: TableStyles;\n  field?: Field;\n}\n\nexport const Filter = ({ column, field, tableStyles }: Props) => {\n  const ref = useRef<HTMLButtonElement>(null);\n  const [isPopoverVisible, setPopoverVisible] = useState<boolean>(false);\n  const styles = useStyles2(getStyles);\n  const filterEnabled = useMemo(() => Boolean(column.filterValue), [column.filterValue]);\n  const onShowPopover = useCallback(() => setPopoverVisible(true), [setPopoverVisible]);\n  const onClosePopover = useCallback(() => setPopoverVisible(false), [setPopoverVisible]);\n  const [searchFilter, setSearchFilter] = useState('');\n  const [operator, setOperator] = useState<SelectableValue<string>>(REGEX_OPERATOR);\n\n  if (!field || !field.config.custom?.filterable) {\n    return null;\n  }\n  return (\n    <button\n      className={cx(tableStyles.headerFilter, filterEnabled ? styles.filterIconEnabled : styles.filterIconDisabled)}\n      ref={ref}\n      type=\"button\"\n      onClick={onShowPopover}\n    >\n      <Icon name=\"filter\" />\n      {isPopoverVisible && ref.current && (\n        <Popover\n          content={\n            <FilterPopup\n              column={column}\n              tableStyles={tableStyles}\n              field={field}\n              onClose={onClosePopover}\n              searchFilter={searchFilter}\n              setSearchFilter={setSearchFilter}\n              operator={operator}\n              setOperator={setOperator}\n            />\n          }\n          placement=\"bottom-start\"\n          referenceElement={ref.current}\n          show\n        />\n      )}\n    </button>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  filterIconEnabled: css({\n    label: 'filterIconEnabled',\n    color: theme.colors.primary.text,\n  }),\n  filterIconDisabled: css({\n    label: 'filterIconDisabled',\n    color: theme.colors.text.disabled,\n  }),\n});\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmBO,MAAM,SAAS,CAAC,EAAE,MAAQ,EAAA,KAAA,EAAO,aAAyB,KAAA;AAnBjE,EAAA,IAAA,EAAA;AAoBE,EAAM,MAAA,GAAA,GAAM,OAA0B,IAAI,CAAA;AAC1C,EAAA,MAAM,CAAC,gBAAA,EAAkB,iBAAiB,CAAA,GAAI,SAAkB,KAAK,CAAA;AACrE,EAAM,MAAA,MAAA,GAAS,WAAW,SAAS,CAAA;AACnC,EAAM,MAAA,aAAA,GAAgB,OAAQ,CAAA,MAAM,OAAQ,CAAA,MAAA,CAAO,WAAW,CAAG,EAAA,CAAC,MAAO,CAAA,WAAW,CAAC,CAAA;AACrF,EAAM,MAAA,aAAA,GAAgB,YAAY,MAAM,iBAAA,CAAkB,IAAI,CAAG,EAAA,CAAC,iBAAiB,CAAC,CAAA;AACpF,EAAM,MAAA,cAAA,GAAiB,YAAY,MAAM,iBAAA,CAAkB,KAAK,CAAG,EAAA,CAAC,iBAAiB,CAAC,CAAA;AACtF,EAAA,MAAM,CAAC,YAAA,EAAc,eAAe,CAAA,GAAI,SAAS,EAAE,CAAA;AACnD,EAAA,MAAM,CAAC,QAAA,EAAU,WAAW,CAAA,GAAI,SAAkC,cAAc,CAAA;AAEhF,EAAA,IAAI,CAAC,KAAS,IAAA,EAAA,CAAC,WAAM,MAAO,CAAA,MAAA,KAAb,sBAAqB,UAAY,CAAA,EAAA;AAC9C,IAAO,OAAA,IAAA;AAAA;AAET,EACE,uBAAA,IAAA;AAAA,IAAC,QAAA;AAAA,IAAA;AAAA,MACC,SAAA,EAAW,GAAG,WAAY,CAAA,YAAA,EAAc,gBAAgB,MAAO,CAAA,iBAAA,GAAoB,OAAO,kBAAkB,CAAA;AAAA,MAC5G,GAAA;AAAA,MACA,IAAK,EAAA,QAAA;AAAA,MACL,OAAS,EAAA,aAAA;AAAA,MAET,QAAA,EAAA;AAAA,wBAAC,GAAA,CAAA,IAAA,EAAA,EAAK,MAAK,QAAS,EAAA,CAAA;AAAA,QACnB,gBAAA,IAAoB,IAAI,OACvB,oBAAA,GAAA;AAAA,UAAC,OAAA;AAAA,UAAA;AAAA,YACC,OACE,kBAAA,GAAA;AAAA,cAAC,WAAA;AAAA,cAAA;AAAA,gBACC,MAAA;AAAA,gBACA,WAAA;AAAA,gBACA,KAAA;AAAA,gBACA,OAAS,EAAA,cAAA;AAAA,gBACT,YAAA;AAAA,gBACA,eAAA;AAAA,gBACA,QAAA;AAAA,gBACA;AAAA;AAAA,aACF;AAAA,YAEF,SAAU,EAAA,cAAA;AAAA,YACV,kBAAkB,GAAI,CAAA,OAAA;AAAA,YACtB,IAAI,EAAA;AAAA;AAAA;AACN;AAAA;AAAA,GAEJ;AAEJ;AAEA,MAAM,SAAA,GAAY,CAAC,KAA0B,MAAA;AAAA,EAC3C,mBAAmB,GAAI,CAAA;AAAA,IACrB,KAAO,EAAA,mBAAA;AAAA,IACP,KAAA,EAAO,KAAM,CAAA,MAAA,CAAO,OAAQ,CAAA;AAAA,GAC7B,CAAA;AAAA,EACD,oBAAoB,GAAI,CAAA;AAAA,IACtB,KAAO,EAAA,oBAAA;AAAA,IACP,KAAA,EAAO,KAAM,CAAA,MAAA,CAAO,IAAK,CAAA;AAAA,GAC1B;AACH,CAAA,CAAA;;;;"}