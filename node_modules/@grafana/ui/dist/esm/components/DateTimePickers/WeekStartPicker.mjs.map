{"version":3,"file":"WeekStartPicker.mjs","sources":["../../../../src/components/DateTimePickers/WeekStartPicker.tsx"],"sourcesContent":["import { useCallback, useMemo } from 'react';\n\nimport { BootData } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { Combobox } from '../Combobox/Combobox';\nimport { ComboboxOption } from '../Combobox/types';\n\nexport interface Props {\n  onChange: (weekStart?: WeekStart) => void;\n  value?: WeekStart;\n  width?: number;\n  autoFocus?: boolean;\n  onBlur?: () => void;\n  disabled?: boolean;\n  inputId?: string;\n}\n\nexport type WeekStart = 'saturday' | 'sunday' | 'monday';\nconst weekStarts: ComboboxOption[] = [\n  { value: '', label: 'Default' },\n  { value: 'saturday', label: 'Saturday' },\n  { value: 'sunday', label: 'Sunday' },\n  { value: 'monday', label: 'Monday' },\n];\n\nexport function isWeekStart(value: string): value is WeekStart {\n  return ['saturday', 'sunday', 'monday'].includes(value);\n}\n\ndeclare global {\n  interface Window {\n    grafanaBootData?: BootData;\n  }\n}\n\n/**\n * Returns the system or user defined week start (as defined in bootData)\n * Or you can pass in an override weekStart string and have it be validated and returned as WeekStart type if valid\n */\nexport function getWeekStart(override?: string): WeekStart {\n  if (override && isWeekStart(override)) {\n    return override;\n  }\n\n  const preference = window?.grafanaBootData?.user?.weekStart;\n  if (preference && isWeekStart(preference)) {\n    return preference;\n  }\n\n  return 'monday';\n}\n\nexport const WeekStartPicker = (props: Props) => {\n  const { onChange, width, autoFocus = false, onBlur, value, disabled = false, inputId } = props;\n\n  const onChangeWeekStart = useCallback(\n    (selectable: ComboboxOption | null) => {\n      if (selectable && selectable.value !== undefined) {\n        onChange(isWeekStart(selectable.value) ? selectable.value : undefined);\n      }\n    },\n    [onChange]\n  );\n\n  const selected = useMemo(() => weekStarts.find((item) => item.value === value)?.value ?? '', [value]);\n\n  return (\n    <Combobox\n      id={inputId}\n      value={selected}\n      placeholder={selectors.components.WeekStartPicker.placeholder}\n      autoFocus={autoFocus}\n      width={width}\n      options={weekStarts}\n      onChange={onChangeWeekStart}\n      onBlur={onBlur}\n      disabled={disabled}\n    />\n  );\n};\n"],"names":[],"mappings":";;;;;AAmBA,MAAM,UAA+B,GAAA;AAAA,EACnC,EAAE,KAAA,EAAO,EAAI,EAAA,KAAA,EAAO,SAAU,EAAA;AAAA,EAC9B,EAAE,KAAA,EAAO,UAAY,EAAA,KAAA,EAAO,UAAW,EAAA;AAAA,EACvC,EAAE,KAAA,EAAO,QAAU,EAAA,KAAA,EAAO,QAAS,EAAA;AAAA,EACnC,EAAE,KAAA,EAAO,QAAU,EAAA,KAAA,EAAO,QAAS;AACrC,CAAA;AAEO,SAAS,YAAY,KAAmC,EAAA;AAC7D,EAAA,OAAO,CAAC,UAAY,EAAA,QAAA,EAAU,QAAQ,CAAA,CAAE,SAAS,KAAK,CAAA;AACxD;AAYO,SAAS,aAAa,QAA8B,EAAA;AAxC3D,EAAA,IAAA,EAAA,EAAA,EAAA;AAyCE,EAAI,IAAA,QAAA,IAAY,WAAY,CAAA,QAAQ,CAAG,EAAA;AACrC,IAAO,OAAA,QAAA;AAAA;AAGT,EAAA,MAAM,UAAa,GAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,MAAA,IAAA,IAAA,GAAA,SAAA,GAAA,MAAA,CAAQ,eAAR,KAAA,IAAA,GAAA,SAAA,GAAA,EAAA,CAAyB,SAAzB,IAA+B,GAAA,SAAA,GAAA,EAAA,CAAA,SAAA;AAClD,EAAI,IAAA,UAAA,IAAc,WAAY,CAAA,UAAU,CAAG,EAAA;AACzC,IAAO,OAAA,UAAA;AAAA;AAGT,EAAO,OAAA,QAAA;AACT;AAEa,MAAA,eAAA,GAAkB,CAAC,KAAiB,KAAA;AAC/C,EAAM,MAAA,EAAE,QAAU,EAAA,KAAA,EAAO,SAAY,GAAA,KAAA,EAAO,QAAQ,KAAO,EAAA,QAAA,GAAW,KAAO,EAAA,OAAA,EAAY,GAAA,KAAA;AAEzF,EAAA,MAAM,iBAAoB,GAAA,WAAA;AAAA,IACxB,CAAC,UAAsC,KAAA;AACrC,MAAI,IAAA,UAAA,IAAc,UAAW,CAAA,KAAA,KAAU,SAAW,EAAA;AAChD,QAAA,QAAA,CAAS,YAAY,UAAW,CAAA,KAAK,CAAI,GAAA,UAAA,CAAW,QAAQ,SAAS,CAAA;AAAA;AACvE,KACF;AAAA,IACA,CAAC,QAAQ;AAAA,GACX;AAEA,EAAM,MAAA,QAAA,GAAW,QAAQ,MAAG;AAjE9B,IAAA,IAAA,EAAA,EAAA,EAAA;AAiEiC,IAAW,OAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,UAAA,CAAA,IAAA,CAAK,CAAC,IAAS,KAAA,IAAA,CAAK,UAAU,KAAK,CAAA,KAA9C,IAAiD,GAAA,SAAA,GAAA,EAAA,CAAA,KAAA,KAAjD,IAA0D,GAAA,EAAA,GAAA,EAAA;AAAA,GAAI,EAAA,CAAC,KAAK,CAAC,CAAA;AAEpG,EACE,uBAAA,GAAA;AAAA,IAAC,QAAA;AAAA,IAAA;AAAA,MACC,EAAI,EAAA,OAAA;AAAA,MACJ,KAAO,EAAA,QAAA;AAAA,MACP,WAAA,EAAa,SAAU,CAAA,UAAA,CAAW,eAAgB,CAAA,WAAA;AAAA,MAClD,SAAA;AAAA,MACA,KAAA;AAAA,MACA,OAAS,EAAA,UAAA;AAAA,MACT,QAAU,EAAA,iBAAA;AAAA,MACV,MAAA;AAAA,MACA;AAAA;AAAA,GACF;AAEJ;;;;"}