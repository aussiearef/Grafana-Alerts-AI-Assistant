{"version":3,"file":"utils.mjs","sources":["../../../../src/components/Sparkline/utils.ts"],"sourcesContent":["import {\n  DataFrame,\n  FieldConfig,\n  FieldSparkline,\n  FieldType,\n  isLikelyAscendingVector,\n  sortDataFrame,\n  applyNullInsertThreshold,\n} from '@grafana/data';\nimport { GraphFieldConfig } from '@grafana/schema';\n\n/** @internal\n * Given a sparkline config returns a DataFrame ready to be turned into Plot data set\n **/\nexport function preparePlotFrame(sparkline: FieldSparkline, config?: FieldConfig<GraphFieldConfig>): DataFrame {\n  const length = sparkline.y.values.length;\n  const yFieldConfig = {\n    ...sparkline.y.config,\n    ...config,\n  };\n\n  const xField = sparkline.x ?? {\n    name: '',\n    values: [...Array(length).keys()],\n    type: FieldType.number,\n    config: {},\n  };\n\n  let frame: DataFrame = {\n    refId: 'sparkline',\n    fields: [\n      xField,\n      {\n        ...sparkline.y,\n        config: yFieldConfig,\n      },\n    ],\n    length,\n  };\n\n  if (!isLikelyAscendingVector(xField.values)) {\n    frame = sortDataFrame(frame, 0);\n  }\n\n  return applyNullInsertThreshold({\n    frame,\n    refFieldPseudoMin: sparkline.timeRange?.from.valueOf(),\n    refFieldPseudoMax: sparkline.timeRange?.to.valueOf(),\n  });\n}\n"],"names":[],"mappings":";;AAcgB,SAAA,gBAAA,CAAiB,WAA2B,MAAmD,EAAA;AAd/G,EAAA,IAAA,EAAA,EAAA,EAAA,EAAA,EAAA;AAeE,EAAM,MAAA,MAAA,GAAS,SAAU,CAAA,CAAA,CAAE,MAAO,CAAA,MAAA;AAClC,EAAA,MAAM,YAAe,GAAA;AAAA,IACnB,GAAG,UAAU,CAAE,CAAA,MAAA;AAAA,IACf,GAAG;AAAA,GACL;AAEA,EAAM,MAAA,MAAA,GAAA,CAAS,EAAU,GAAA,SAAA,CAAA,CAAA,KAAV,IAAe,GAAA,EAAA,GAAA;AAAA,IAC5B,IAAM,EAAA,EAAA;AAAA,IACN,QAAQ,CAAC,GAAG,MAAM,MAAM,CAAA,CAAE,MAAM,CAAA;AAAA,IAChC,MAAM,SAAU,CAAA,MAAA;AAAA,IAChB,QAAQ;AAAC,GACX;AAEA,EAAA,IAAI,KAAmB,GAAA;AAAA,IACrB,KAAO,EAAA,WAAA;AAAA,IACP,MAAQ,EAAA;AAAA,MACN,MAAA;AAAA,MACA;AAAA,QACE,GAAG,SAAU,CAAA,CAAA;AAAA,QACb,MAAQ,EAAA;AAAA;AACV,KACF;AAAA,IACA;AAAA,GACF;AAEA,EAAA,IAAI,CAAC,uBAAA,CAAwB,MAAO,CAAA,MAAM,CAAG,EAAA;AAC3C,IAAQ,KAAA,GAAA,aAAA,CAAc,OAAO,CAAC,CAAA;AAAA;AAGhC,EAAA,OAAO,wBAAyB,CAAA;AAAA,IAC9B,KAAA;AAAA,IACA,iBAAmB,EAAA,CAAA,EAAA,GAAA,SAAA,CAAU,SAAV,KAAA,IAAA,GAAA,SAAA,GAAA,EAAA,CAAqB,IAAK,CAAA,OAAA,EAAA;AAAA,IAC7C,iBAAmB,EAAA,CAAA,EAAA,GAAA,SAAA,CAAU,SAAV,KAAA,IAAA,GAAA,SAAA,GAAA,EAAA,CAAqB,EAAG,CAAA,OAAA;AAAA,GAC5C,CAAA;AACH;;;;"}