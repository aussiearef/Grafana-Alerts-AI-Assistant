{"version":3,"file":"thresholds.mjs","sources":["../../../src/field/thresholds.ts"],"sourcesContent":["import { Field } from '../types/dataFrame';\nimport { FALLBACK_COLOR } from '../types/fieldColor';\nimport { Threshold, ThresholdsMode } from '../types/thresholds';\n\nexport const fallBackThreshold: Threshold = { value: 0, color: FALLBACK_COLOR };\n\nexport function getActiveThreshold(value: number, thresholds: Threshold[] | undefined): Threshold {\n  if (!thresholds || thresholds.length === 0) {\n    return fallBackThreshold;\n  }\n\n  let active = thresholds[0];\n\n  for (const threshold of thresholds) {\n    if (value >= threshold.value) {\n      active = threshold;\n    } else {\n      break;\n    }\n  }\n\n  return active;\n}\n\nexport function getActiveThresholdForValue(field: Field, value: number, percent: number): Threshold {\n  const { thresholds } = field.config;\n\n  if (thresholds?.mode === ThresholdsMode.Percentage) {\n    return getActiveThreshold(percent * 100, thresholds?.steps);\n  }\n\n  return getActiveThreshold(value, thresholds?.steps);\n}\n\n/**\n * Sorts the thresholds\n */\nexport function sortThresholds(thresholds: Threshold[]) {\n  return thresholds.sort((t1, t2) => t1.value - t2.value);\n}\n"],"names":[],"mappings":";;;AAIO,MAAM,iBAA+B,GAAA,EAAE,KAAO,EAAA,CAAA,EAAG,OAAO,cAAe;AAE9D,SAAA,kBAAA,CAAmB,OAAe,UAAgD,EAAA;AAChG,EAAA,IAAI,CAAC,UAAA,IAAc,UAAW,CAAA,MAAA,KAAW,CAAG,EAAA;AAC1C,IAAO,OAAA,iBAAA;AAAA;AAGT,EAAI,IAAA,MAAA,GAAS,WAAW,CAAC,CAAA;AAEzB,EAAA,KAAA,MAAW,aAAa,UAAY,EAAA;AAClC,IAAI,IAAA,KAAA,IAAS,UAAU,KAAO,EAAA;AAC5B,MAAS,MAAA,GAAA,SAAA;AAAA,KACJ,MAAA;AACL,MAAA;AAAA;AACF;AAGF,EAAO,OAAA,MAAA;AACT;AAEgB,SAAA,0BAAA,CAA2B,KAAc,EAAA,KAAA,EAAe,OAA4B,EAAA;AAClG,EAAM,MAAA,EAAE,UAAW,EAAA,GAAI,KAAM,CAAA,MAAA;AAE7B,EAAI,IAAA,CAAA,UAAA,IAAA,IAAA,GAAA,SAAA,GAAA,UAAA,CAAY,IAAS,MAAA,cAAA,CAAe,UAAY,EAAA;AAClD,IAAA,OAAO,kBAAmB,CAAA,OAAA,GAAU,GAAK,EAAA,UAAA,IAAA,IAAA,GAAA,SAAA,GAAA,UAAA,CAAY,KAAK,CAAA;AAAA;AAG5D,EAAO,OAAA,kBAAA,CAAmB,KAAO,EAAA,UAAA,IAAA,IAAA,GAAA,SAAA,GAAA,UAAA,CAAY,KAAK,CAAA;AACpD;AAKO,SAAS,eAAe,UAAyB,EAAA;AACtD,EAAO,OAAA,UAAA,CAAW,KAAK,CAAC,EAAA,EAAI,OAAO,EAAG,CAAA,KAAA,GAAQ,GAAG,KAAK,CAAA;AACxD;;;;"}