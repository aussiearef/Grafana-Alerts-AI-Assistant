{"version":3,"file":"OptionsUIBuilders.mjs","sources":["../../../src/utils/OptionsUIBuilders.ts"],"sourcesContent":["import { set, cloneDeep } from 'lodash';\n\nimport {\n  FieldNamePickerConfigSettings,\n  NumberFieldConfigSettings,\n  SelectFieldConfigSettings,\n  SliderFieldConfigSettings,\n  StringFieldConfigSettings,\n  UnitFieldConfigSettings,\n  booleanOverrideProcessor,\n  identityOverrideProcessor,\n  numberOverrideProcessor,\n  selectOverrideProcessor,\n  stringOverrideProcessor,\n  unitOverrideProcessor,\n} from '../field/overrides/processors';\nimport {\n  StandardEditorContext,\n  StandardEditorProps,\n  standardEditorsRegistry,\n} from '../field/standardFieldConfigEditorRegistry';\nimport { PanelOptionsSupplier } from '../panel/PanelPlugin';\nimport { OptionsEditorItem, OptionsUIRegistryBuilder } from '../types/OptionsUIRegistryBuilder';\nimport { isObject } from '../types/data';\nimport { FieldConfigPropertyItem, FieldConfigEditorConfig } from '../types/fieldOverrides';\nimport { PanelOptionsEditorConfig, PanelOptionsEditorItem } from '../types/panel';\n\n/**\n * Fluent API for declarative creation of field config option editors\n */\nexport class FieldConfigEditorBuilder<TOptions> extends OptionsUIRegistryBuilder<\n  TOptions,\n  StandardEditorProps,\n  FieldConfigPropertyItem<TOptions>\n> {\n  addNumberInput<TSettings>(config: FieldConfigEditorConfig<TOptions, TSettings & NumberFieldConfigSettings, number>) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      override: standardEditorsRegistry.get('number').editor,\n      editor: standardEditorsRegistry.get('number').editor,\n      process: numberOverrideProcessor,\n      shouldApply: config.shouldApply ?? (() => true),\n      settings: config.settings || {},\n    });\n  }\n\n  addSliderInput<TSettings>(config: FieldConfigEditorConfig<TOptions, TSettings & SliderFieldConfigSettings, number>) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      override: standardEditorsRegistry.get('slider').editor,\n      editor: standardEditorsRegistry.get('slider').editor,\n      process: numberOverrideProcessor,\n      shouldApply: config.shouldApply ?? (() => true),\n      settings: config.settings || {},\n    });\n  }\n\n  addTextInput<TSettings>(config: FieldConfigEditorConfig<TOptions, TSettings & StringFieldConfigSettings, string>) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      override: standardEditorsRegistry.get('text').editor,\n      editor: standardEditorsRegistry.get('text').editor,\n      process: stringOverrideProcessor,\n      shouldApply: config.shouldApply ?? (() => true),\n      settings: config.settings || {},\n    });\n  }\n\n  addSelect<TOption, TSettings extends SelectFieldConfigSettings<TOption>>(\n    config: FieldConfigEditorConfig<TOptions, TSettings, TOption>\n  ) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      override: standardEditorsRegistry.get('select').editor,\n      editor: standardEditorsRegistry.get('select').editor,\n      process: selectOverrideProcessor,\n      // ???\n      shouldApply: config.shouldApply ? config.shouldApply : () => true,\n      settings: config.settings || { options: [] },\n    });\n  }\n\n  addRadio<TOption, TSettings>(config: FieldConfigEditorConfig<TOptions, TSettings, TOption>) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      override: standardEditorsRegistry.get('radio').editor,\n      editor: standardEditorsRegistry.get('radio').editor,\n      process: selectOverrideProcessor,\n      // ???\n      shouldApply: config.shouldApply ? config.shouldApply : () => true,\n      settings: config.settings || { options: [] },\n    });\n  }\n\n  addBooleanSwitch<TSettings>(config: FieldConfigEditorConfig<TOptions, TSettings, boolean>) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('boolean').editor,\n      override: standardEditorsRegistry.get('boolean').editor,\n      process: booleanOverrideProcessor,\n      shouldApply: config.shouldApply ? config.shouldApply : () => true,\n      settings: config.settings || {},\n    });\n  }\n\n  addColorPicker<TSettings>(config: FieldConfigEditorConfig<TOptions, TSettings, string>) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('color').editor,\n      override: standardEditorsRegistry.get('color').editor,\n      process: identityOverrideProcessor,\n      shouldApply: config.shouldApply ? config.shouldApply : () => true,\n      settings: config.settings || {},\n    });\n  }\n\n  addUnitPicker<TSettings>(config: FieldConfigEditorConfig<TOptions, TSettings & UnitFieldConfigSettings, string>) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('unit').editor,\n      override: standardEditorsRegistry.get('unit').editor,\n      process: unitOverrideProcessor,\n      shouldApply: config.shouldApply ? config.shouldApply : () => true,\n      settings: config.settings || {},\n    });\n  }\n\n  addFieldNamePicker<TSettings>(\n    config: FieldConfigEditorConfig<TOptions, TSettings & FieldNamePickerConfigSettings, string>\n  ): this {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('field-name').editor,\n      override: standardEditorsRegistry.get('field-name').editor,\n      process: identityOverrideProcessor,\n      shouldApply: config.shouldApply ? config.shouldApply : () => true,\n      settings: config.settings || {},\n    });\n  }\n\n  addGenericEditor<TSettings>(\n    config: FieldConfigEditorConfig<TOptions, TSettings & any>, // & any... i give up!\n    editor: (props: StandardEditorProps<TSettings>) => JSX.Element\n  ): this {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: editor,\n      override: editor,\n      process: identityOverrideProcessor,\n      shouldApply: config.shouldApply ? config.shouldApply : () => true,\n      settings: config.settings || {},\n    });\n  }\n}\n\nexport interface NestedValueAccess {\n  getValue: (path: string) => any;\n  onChange: (path: string, value: any) => void;\n  getContext?: (parent: StandardEditorContext<any>) => StandardEditorContext<any>;\n}\nexport interface NestedPanelOptions<TSub = any> {\n  path: string;\n  category?: string[];\n  defaultValue?: TSub;\n  build: PanelOptionsSupplier<TSub>;\n  values?: (parent: NestedValueAccess) => NestedValueAccess;\n}\n\nexport class NestedPanelOptionsBuilder<TSub = any> implements OptionsEditorItem<TSub, any, any, any> {\n  path = '';\n  category?: string[];\n  defaultValue?: TSub;\n  id = 'nested-panel-options';\n  name = 'nested';\n  editor = () => null;\n\n  constructor(public cfg: NestedPanelOptions<TSub>) {\n    this.path = cfg.path;\n    this.category = cfg.category;\n    this.defaultValue = this.getDefaultValue(cfg);\n  }\n\n  private getDefaultValue(cfg: NestedPanelOptions<TSub>): TSub {\n    let result = isObject(cfg.defaultValue) ? cloneDeep(cfg.defaultValue) : {};\n\n    const builder = new PanelOptionsEditorBuilder<TSub>();\n    cfg.build(builder, { data: [] });\n\n    for (const item of builder.getItems()) {\n      if (item.defaultValue != null) {\n        set(result, item.path, item.defaultValue);\n      }\n    }\n\n    // TSub is defined as type any and we need to cast it back\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n    return result as TSub;\n  }\n\n  getBuilder = () => {\n    return this.cfg.build;\n  };\n\n  getNestedValueAccess = (parent: NestedValueAccess) => {\n    const values = this.cfg.values;\n    if (values) {\n      return values(parent);\n    }\n    // by default prefix the path\n    return {\n      getValue: (path: string) => parent.getValue(`${this.path}.${path}`),\n      onChange: (path: string, value: any) => parent.onChange(`${this.path}.${path}`, value),\n    };\n  };\n}\n\nexport function isNestedPanelOptions(item: unknown): item is NestedPanelOptionsBuilder {\n  return isObject(item) && 'id' in item && item.id === 'nested-panel-options';\n}\n\n/**\n * Fluent API for declarative creation of panel options\n */\nexport class PanelOptionsEditorBuilder<TOptions> extends OptionsUIRegistryBuilder<\n  TOptions,\n  StandardEditorProps,\n  PanelOptionsEditorItem<TOptions>\n> {\n  addNestedOptions<Sub>(opts: NestedPanelOptions<Sub>) {\n    const s = new NestedPanelOptionsBuilder<Sub>(opts);\n    return this.addCustomEditor(s);\n  }\n\n  addNumberInput<TSettings>(config: PanelOptionsEditorConfig<TOptions, TSettings & NumberFieldConfigSettings, number>) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('number').editor,\n    });\n  }\n\n  addSliderInput<TSettings>(config: PanelOptionsEditorConfig<TOptions, TSettings & SliderFieldConfigSettings, number>) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('slider').editor,\n    });\n  }\n\n  addTextInput<TSettings>(config: PanelOptionsEditorConfig<TOptions, TSettings & StringFieldConfigSettings, string>) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('text').editor,\n    });\n  }\n\n  addStringArray<TSettings>(\n    config: PanelOptionsEditorConfig<TOptions, TSettings & StringFieldConfigSettings, string[]>\n  ) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('strings').editor,\n    });\n  }\n\n  addSelect<TOption, TSettings extends SelectFieldConfigSettings<TOption>>(\n    config: PanelOptionsEditorConfig<TOptions, TSettings, TOption>\n  ) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('select').editor,\n    });\n  }\n\n  addMultiSelect<TOption, TSettings extends SelectFieldConfigSettings<TOption>>(\n    config: PanelOptionsEditorConfig<TOptions, TSettings, TOption>\n  ) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('multi-select').editor,\n    });\n  }\n\n  addRadio<TOption, TSettings extends SelectFieldConfigSettings<TOption>>(\n    config: PanelOptionsEditorConfig<TOptions, TSettings, TOption>\n  ) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('radio').editor,\n    });\n  }\n\n  addBooleanSwitch<TSettings>(config: PanelOptionsEditorConfig<TOptions, TSettings, boolean>) {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('boolean').editor,\n    });\n  }\n\n  addColorPicker<TSettings>(config: PanelOptionsEditorConfig<TOptions, TSettings, string>): this {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('color').editor,\n      settings: config.settings || {},\n    });\n  }\n\n  addTimeZonePicker<TSettings>(config: PanelOptionsEditorConfig<TOptions, TSettings, string>): this {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('timezone').editor,\n      settings: config.settings || {},\n    });\n  }\n\n  addUnitPicker<TSettings>(\n    config: PanelOptionsEditorConfig<TOptions, TSettings & UnitFieldConfigSettings, string>\n  ): this {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('unit').editor,\n    });\n  }\n\n  addFieldNamePicker<TSettings>(\n    config: PanelOptionsEditorConfig<TOptions, TSettings & FieldNamePickerConfigSettings, string>\n  ): this {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('field-name').editor,\n    });\n  }\n\n  addDashboardPicker<TSettings>(\n    config: PanelOptionsEditorConfig<TOptions, TSettings & FieldNamePickerConfigSettings, string>\n  ): this {\n    return this.addCustomEditor({\n      ...config,\n      id: config.path,\n      editor: standardEditorsRegistry.get('dashboard-uid').editor, // added at runtime\n    });\n  }\n}\n"],"names":[],"mappings":"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"}