{"version":3,"file":"ArrayVector.mjs","sources":["../../../src/vector/ArrayVector.ts"],"sourcesContent":["const notice = 'ArrayVector is deprecated and will be removed in Grafana 11. Please use plain arrays for field.values.';\nlet notified = false;\n\n/**\n * @public\n *\n * @deprecated use a simple Array<T>\n */\nexport class ArrayVector<T = unknown> extends Array<T> {\n  get buffer() {\n    return this;\n  }\n\n  set buffer(values: T[]) {\n    this.length = 0;\n\n    const len = values?.length;\n\n    if (len) {\n      let chonkSize = 65e3;\n      let numChonks = Math.ceil(len / chonkSize);\n\n      for (let chonkIdx = 0; chonkIdx < numChonks; chonkIdx++) {\n        this.push.apply(this, values.slice(chonkIdx * chonkSize, (chonkIdx + 1) * chonkSize));\n      }\n    }\n  }\n\n  /**\n   * ArrayVector is deprecated and should not be used. If you get a Typescript error here, use plain arrays for field.values.\n   */\n  // `never` is used to force a build-type error from Typescript to encourage developers to move away from using this\n  constructor(buffer: never) {\n    super();\n    this.buffer = buffer ?? [];\n\n    if (!notified) {\n      console.warn(notice);\n      notified = true;\n    }\n  }\n\n  toJSON(): T[] {\n    return [...this]; // copy to avoid circular reference (only for jest)\n  }\n}\n"],"names":[],"mappings":"AAAA,MAAM,MAAS,GAAA,wGAAA;AACf,IAAI,QAAW,GAAA,KAAA;AAOR,MAAM,oBAAiC,KAAS,CAAA;AAAA,EACrD,IAAI,MAAS,GAAA;AACX,IAAO,OAAA,IAAA;AAAA;AACT,EAEA,IAAI,OAAO,MAAa,EAAA;AACtB,IAAA,IAAA,CAAK,MAAS,GAAA,CAAA;AAEd,IAAA,MAAM,MAAM,MAAQ,IAAA,IAAA,GAAA,SAAA,GAAA,MAAA,CAAA,MAAA;AAEpB,IAAA,IAAI,GAAK,EAAA;AACP,MAAA,IAAI,SAAY,GAAA,IAAA;AAChB,MAAA,IAAI,SAAY,GAAA,IAAA,CAAK,IAAK,CAAA,GAAA,GAAM,SAAS,CAAA;AAEzC,MAAA,KAAA,IAAS,QAAW,GAAA,CAAA,EAAG,QAAW,GAAA,SAAA,EAAW,QAAY,EAAA,EAAA;AACvD,QAAK,IAAA,CAAA,IAAA,CAAK,KAAM,CAAA,IAAA,EAAM,MAAO,CAAA,KAAA,CAAM,WAAW,SAAY,EAAA,CAAA,QAAA,GAAW,CAAK,IAAA,SAAS,CAAC,CAAA;AAAA;AACtF;AACF;AACF;AAAA;AAAA;AAAA;AAAA,EAMA,YAAY,MAAe,EAAA;AACzB,IAAM,KAAA,EAAA;AACN,IAAK,IAAA,CAAA,MAAA,GAAS,0BAAU,EAAC;AAEzB,IAAA,IAAI,CAAC,QAAU,EAAA;AACb,MAAA,OAAA,CAAQ,KAAK,MAAM,CAAA;AACnB,MAAW,QAAA,GAAA,IAAA;AAAA;AACb;AACF,EAEA,MAAc,GAAA;AACZ,IAAO,OAAA,CAAC,GAAG,IAAI,CAAA;AAAA;AAEnB;;;;"}