{"version":3,"file":"openai.js","sources":["../../src/openai.ts"],"sourcesContent":["/**\n * @deprecated This module is deprecated and will be removed in a future version.\n * Please use the vendor-neutral `llm.ts` module instead.\n * \n * All exports from this file are re-exported from `llm.ts` for backward compatibility.\n * \n * BREAKING CHANGE in v0.13.0: The health check response format has changed from\n * { details: { openAI: { configured: true, ok: true } } }\n * to\n * { details: { llmProvider: { configured: true, ok: true } } }\n * \n * This module now handles both formats for backward compatibility, but will be removed in a future version.\n */\n\nimport { getBackendSrv } from '@grafana/runtime';\nimport { LLM_PLUGIN_ROUTE } from './constants';\n\n// Re-export everything from llm.ts except enabled\nexport * from './llm';\n\n// Override enabled function to handle both old and new formats\nexport const enabled = async (): Promise<boolean> => {\n  try {\n    const settings = await getBackendSrv().get(`${LLM_PLUGIN_ROUTE}/settings`);\n    if (!settings.enabled) {\n      return false;\n    }\n\n    const health = await getBackendSrv().get(`${LLM_PLUGIN_ROUTE}/health`);\n    const details = health.details;\n\n    // Handle both new and old formats\n    if (details.llmProvider) {\n      return details.llmProvider.configured && details.llmProvider.ok;\n    }\n    if (details.openAI) {\n      return details.openAI.configured && details.openAI.ok;\n    }\n    return false;\n  } catch (e) {\n    return false;\n  }\n};\n"],"names":[],"mappings":";;;;AAqBO,MAAM,UAAU,YAA8B;AACnD,EAAI,IAAA;AACF,IAAA,MAAM,WAAW,MAAM,aAAA,GAAgB,GAAI,CAAA,CAAA,EAAG,gBAAgB,CAAW,SAAA,CAAA,CAAA;AACzE,IAAI,IAAA,CAAC,SAAS,OAAS,EAAA;AACrB,MAAO,OAAA,KAAA;AAAA;AAGT,IAAA,MAAM,SAAS,MAAM,aAAA,GAAgB,GAAI,CAAA,CAAA,EAAG,gBAAgB,CAAS,OAAA,CAAA,CAAA;AACrE,IAAA,MAAM,UAAU,MAAO,CAAA,OAAA;AAGvB,IAAA,IAAI,QAAQ,WAAa,EAAA;AACvB,MAAA,OAAO,OAAQ,CAAA,WAAA,CAAY,UAAc,IAAA,OAAA,CAAQ,WAAY,CAAA,EAAA;AAAA;AAE/D,IAAA,IAAI,QAAQ,MAAQ,EAAA;AAClB,MAAA,OAAO,OAAQ,CAAA,MAAA,CAAO,UAAc,IAAA,OAAA,CAAQ,MAAO,CAAA,EAAA;AAAA;AAErD,IAAO,OAAA,KAAA;AAAA,WACA,CAAG,EAAA;AACV,IAAO,OAAA,KAAA;AAAA;AAEX;;;;"}