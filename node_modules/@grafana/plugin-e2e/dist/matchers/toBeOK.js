'use strict';

var utils = require('./utils.js');

const toBeOK = async (request) => {
  let pass = false;
  let actual;
  let message = "Response status code is within 200..299 range.";
  try {
    const response = await request;
    return {
      message: () => utils.getMessage(message, response.status().toString()),
      pass: response.ok(),
      actual: response.status()
    };
  } catch (err) {
    return {
      message: () => utils.getMessage(message, err instanceof Error ? err.toString() : "Unknown error"),
      pass,
      actual
    };
  }
};

exports.toBeOK = toBeOK;
