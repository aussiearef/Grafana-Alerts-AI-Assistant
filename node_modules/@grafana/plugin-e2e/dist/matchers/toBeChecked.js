'use strict';

var test = require('@playwright/test');
var utils = require('./utils.js');
var Switch = require('../models/components/Switch.js');

async function toBeChecked(target, options) {
  const expected = options?.checked ?? true;
  try {
    if (target instanceof Switch.Switch) {
      await test.expect(target.locator()).toBeChecked({ ...options, checked: expected });
    } else {
      await test.expect(target).toBeChecked(options);
    }
    return {
      pass: true,
      expected,
      message: () => `Value successfully selected`
    };
  } catch (err) {
    return {
      message: () => utils.getMessage(expected.toString(), err instanceof Error ? err.toString() : "Unknown error"),
      pass: false
    };
  }
}

exports.toBeChecked = toBeChecked;
