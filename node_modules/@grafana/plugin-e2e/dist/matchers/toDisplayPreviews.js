'use strict';

var test = require('@playwright/test');
var utils = require('./utils.js');

const toDisplayPreviews = async (variableEditPage, previewTexts, options) => {
  let pass = false;
  let actual;
  let message = `To find preview of values: ${previewTexts.join(", ")}}`;
  try {
    await test.expect(
      variableEditPage.getByGrafanaSelector(
        variableEditPage.ctx.selectors.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption
      )
    ).toContainText(previewTexts, options);
    return {
      pass: true,
      actual: false,
      message: () => message
    };
  } catch (err) {
    return {
      message: () => utils.getMessage(message, err instanceof Error ? err.toString() : "Unknown error"),
      pass,
      actual
    };
  }
};

exports.toDisplayPreviews = toDisplayPreviews;
