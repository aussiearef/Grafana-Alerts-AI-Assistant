'use strict';

var path = require('path');
var fs = require('fs');

const DASHBOARDS_DIR = "dashboards";
const readProvisionedDashboard = async ({ provisioningRootDir }, use) => {
  await use(async ({ fileName }) => {
    const resolvedPath = path.resolve(path.join(provisioningRootDir, DASHBOARDS_DIR, fileName));
    const contents = await fs.promises.readFile(resolvedPath, "utf8");
    return JSON.parse(contents);
  });
};

exports.readProvisionedDashboard = readProvisionedDashboard;
