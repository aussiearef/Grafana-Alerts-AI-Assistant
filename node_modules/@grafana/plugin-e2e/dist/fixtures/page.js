'use strict';

var overrideFeatureToggles = require('./scripts/overrideFeatureToggles.js');

const page = async ({ page: page2, featureToggles }, use) => {
  if (Object.keys(featureToggles).length > 0) {
    try {
      await page2.addInitScript(overrideFeatureToggles.overrideFeatureToggles, featureToggles);
    } catch (error) {
      console.error("Failed to set feature toggles", error);
    }
  }
  await page2.goto("/");
  await use(page2);
};

exports.page = page;
